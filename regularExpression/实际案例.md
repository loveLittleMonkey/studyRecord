```js
console.time('t')
var str = "aaaafaffafafafafafa你鬼地方个个梵蒂冈的非官方的鬼地方个!"

var reg = /^([ .·{}()《》_=A-Za-z0-9]|[\u4e00-\u9fa5]|[\u3400-\u4db5]|[\u20000-\u2a6d6]|[\u2a700-\u2b734]|[\u2b740-\u2b81d]|[\u2b820-\u2cea1]|[\u2ceb0-\u2ebe0]|[\u30000-\u3134a])+$/g

var res = str.match(reg)
console.timeEnd('t')
```



存在的问题1：unicode如果是五位的话，应该开启u模式，字符段用{} ，即正则应该是 `var reg = /^([ .·{}()《》_=A-Za-z0-9]|[\u4e00-\u9fa5]|[\u3400-\u4db5]|[\u{20000}-\u{2a6d6}]|[\u{2a700}-\u{2b734}]|[\u{2b740}-\u{2b81d}]|[\u{2b820}-\u{2cea1}]|[\u{2ceb0}-\u{2ebe0}]|[\u{30000}-\u{3134a}])+$/gu;`

存在的问题2：当用不正确的正则的时候，字符串a和正则中的后续子集能匹配上，导致了无限回溯的情况。这里尝试用`var reg = /^([ .·{}()《》_=A-Za-z0-9|\u4e00-\u9fa5|\u3400-\u4db5|\u20000-\u2a6d6|\u2a700-\u2b734|\u2b740-\u2b81d|\u2b820-\u2cea1|\u2ceb0-\u2ebe0|\u30000-\u3134a])+$/g`来减少回溯的情况



存在的疑问：

1. 当没有开启u模式的时候，`\u20000`是编译成了啥玩意？为什么af能匹配上
2. []|[]  和 [|] 的方式，回溯的场景次数不一样？为啥
3. 在哪里找到unicode对应字符段的对应的具体的内容



